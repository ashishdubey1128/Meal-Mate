<!DOCTYPE html>
<html>
<head>
	<title>Home Page</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Baloo+Thambi" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Baloo" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
<style type="text/css">
  html,body{
height: 100%;}

</style>
<style>
#mySidenav a {
    position: absolute;
    left: -80px;
    transition: 0.3s;
    padding: 15px;
    width: 100px;
    text-decoration: none;
    font-size: 20px;
    color: white;
    border-radius: 0 5px 5px 0;
}

#mySidenav a:hover {
    left: 0;
}

#add {
    top: 140px;
    background-color: #4CAF50;
}

#view {
    top: 200px;
    background-color: #2196F3;
}

#delete {
    top: 260px;
    background-color: #f44336;
}
#dep {
    top: 320px;
    background-color: #0042ad;
}

#logout {
    top: 380px;
    background-color: #555;
}
</style>

	
</head>
<body data-spy="scroll" data-target=".main" data-offset="50">
  <div id="mySidenav" class="sidenav main">
  <a href="#register" id="add">Register</a>
  <a href="#all" id="view">View</a>
  <a href="#del" id="delete">Delete</a>
  <a href="#ded" id="dep">Deposit</a>
  <a href="/logout" id="logout">Log out</a>
</div>
  <div style="background-image: url(https://images.unsplash.com/photo-1460819739742-50e4486578f5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=967&q=80);background-size: cover;background-repeat: no-repeat;height: 100%;text-align: center;" id="m">
        <div class="container main" style="padding-top: 10px;">
          <div class="jumbotron" style="text-align: center;border-radius: 30px;margin-right: 10%;margin-left: 10%;background-color: #070707;background-color: rgba(0,0,0,0.5);">
          <h1 style="color: white;">Welcome to the Mess!!!!</h1>
          <h3 style="color: beige;">Scan your ID to get the plate</h3>
          <div>
            <video id="preview" style="height: 300px;width: 300px;padding-top: 0;padding-bottom: 0;"></video>
          </div>
          <button class="btn btn-sm btn-primary" onclick="cam()">QR</button>
          <form method="post" action="/verify">
          <input type="text" id="r" name="regg">
          <button class="btn btn-lg btn-warning">Verify</button>
          </form>
          </div>
        </div>
  </div>



  <div style="background-image: url(https://images.unsplash.com/photo-1522709553816-36115b3cc2ef?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80);background-size: cover;background-repeat: no-repeat;" class="slide" id="register">
  <div class="container" style="padding-top: 100px;padding-bottom: 300px;text-align: center;">
    <div style="margin-right: 10%;margin-left: 10%;border-radius: 40px;">
        <form method="post" action="/register">
          <table class="table table-hover" style="background-color: rgba(255,255,255,0.6);margin-top: 20%;border-radius: 10px;">
            <tr>
              <td>Student's Name</td>
              <td><input type="text" id="stuname" name="stuname" placeholder="Name"></td>
            </tr>
            <tr>
              <td>Registration Number</td>
              <td><input type="text" id="regno" name="regno" placeholder="Registration Number" </td>
            </tr>
            <tr>
              <td>Room Number</td>
              <td><input type="text" name="rno" placeholder="Room No"></td>
            </tr>
            <tr>
              <td>Mess Credit</td>
              <td><input type="number" name="mb" placeholder="Mess Credit"></td>
            </tr>
          </table>
          <button class="btn btn-primary btn-md">Register</button>
        </form> 
    </div>
  </div>
</div>


  <div style="background-image: url(https://images.unsplash.com/photo-1492546643178-96d64f3fd824?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1502&q=80);background-size: cover;background-repeat: no-repeat;" class="slide" id="all">
  <div class="container" style="padding-top: 100px;padding-bottom: 300px;text-align: center;">
    <div class="jumbotron" style="background-color: rgba(0,0,0,0.6);border-radius: 20px;margin-right: 20%;margin-left: 20%;color: white;">
      <h1>Students Registered</h1>
    </div>
    <div style="background-color: rgba(0,0,0,0.6);color: white;">
        <table class="table table-hover">
        <th>Name</th><th>Reg. No.</th><th>Room No.</th><th>Mess balance</th>
        <%stu.forEach(function(stu){%>
        <tr>
          <td><%=stu.username%></td>
          <td><%=stu.regno%></td>
          <td><%=stu.roomno%></td>
          <td><%=stu.messbal%></td>
        </tr>
      <%});%>
      </table>
    </div>
    <a href="#m" class="btn btn-sm btn-primary" style="float: right;">Top</a>
  </div>
</div>




<div style="background-image: url(https://images.unsplash.com/photo-1494794347578-e22cd4049dad?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80);background-size: cover;background-repeat: no-repeat;" class="slide" id="del">
  <div class="container" style="padding-top: 100px;padding-bottom: 300px;text-align: center;">
    <div class="jumbotron" style="background-color: rgba(0,0,0,0.6);border-radius: 20px;margin-right: 20%;margin-left: 20%;color: white;">
      <h1>Delete User !!</h1>
      <form method="post" action="/delete">
        <input type="text" name="reg" placeholder="Enter the Registration no. to Delete" style="width: 40%;height: 30px; border-radius: 5px;">
        <button class="btn btn-lg btn-danger">Delete</button>
      </form>
    </div>
    <a href="#m" class="btn btn-sm btn-primary">Top</a>
  </div>
</div>


<div style="background-image: url(https://images.unsplash.com/photo-1494794347578-e22cd4049dad?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80);background-size: cover;background-repeat: no-repeat;" class="slide" id="ded">
  <div class="container" style="padding-top: 100px;padding-bottom: 300px;text-align: center;">
    <div class="jumbotron" style="background-color: rgba(0,0,0,0.6);border-radius: 20px;margin-right: 20%;margin-left: 20%;color: white;">
      <h1>Deposit your Plate</h1>
      <div>
        <video id="preview" style="height: 300px;width: 300px;padding-top: 0;padding-bottom: 0;"></video>
        </div>
        <button class="btn btn-sm btn-primary" onclick="cam1()">QR</button>
          <form method="post" action="/deposit">
          <input type="text" id="rn" name="regg">
          <input type="radio" name="th">Over
          <input type="radio" name="th">Under
          <button class="btn btn-lg btn-warning">Deposit</button>
          </form>
    </div>
  </div>
</div>



 
<script type="text/javascript">
  function cam()
  {
          let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
          scanner.addListener('scan', function (content) {
          var zp=$(content).filter('PrintLetterBarcodeData').attr('uid');
          $("#r").val(zp);
          });
          Instascan.Camera.getCameras().then(function (cameras) {
            if (cameras.length > 0) {
              scanner.start(cameras[0]);
            } else {
              console.error('No cameras found.');
            }
          }).catch(function (e) {
            console.error(e);
          });
  }

   function cam1()
  {
          let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
          scanner.addListener('scan', function (content) {
          var zp=$(content).filter('PrintLetterBarcodeData').attr('uid');
          $("#rn").val(zp);
          });
          Instascan.Camera.getCameras().then(function (cameras) {
            if (cameras.length > 0) {
              scanner.start(cameras[0]);
            } else {
              console.error('No cameras found.');
            }
          }).catch(function (e) {
            console.error(e);
          });
  }


</script>





<script>
$(document).ready(function(){
  // Add smooth scrolling to all links in navbar + footer link
  $(".main a").on('click', function(event) {
    // Make sure this.hash has a value before overriding default behavior
    if (this.hash !== "") {
      // Prevent default anchor click behavior
      event.preventDefault();

      // Store hash
      var hash = this.hash;

      // Using jQuery's animate() method to add smooth page scroll
      // The optional number (900) specifies the number of milliseconds it takes to scroll to the specified area
      $('html, body').animate({
        scrollTop: $(hash).offset().top
      }, 900, function(){
   
        // Add hash (#) to URL when done scrolling (default click behavior)
        window.location.hash = hash;
      });
    } // End if
  });
  
  $(window).scroll(function() {
    $(".slideanim").each(function(){
      var pos = $(this).offset().top;

      var winTop = $(window).scrollTop();
        if (pos < winTop + 600) {
          $(this).addClass("slide");
        }
    });
  });
})
</script>
</body>
</html>